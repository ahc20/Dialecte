<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dialect â€“ Kabyle</title>
  <link rel="stylesheet" href="styles/style.css?v=4" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="icon" type="image/png" href="images/logo.png" />
</head>

<body>
  <button class="mobile-menu-btn">â˜°</button>
  <div class="mobile-menu-bg"></div>
  <nav class="mobile-menu">
    <a href="index.html">ğŸ  Accueil</a>
    <a href="review.html">ğŸ§  Apprendre</a>
    <a href="progres.html">ğŸ“ˆ ProgrÃ¨s</a>
    <a href="login.html">ğŸ” Connexion</a>
  </nav>
  <nav>
    <a href="index.html" class="logo">Dialect</a>
    <div class="nav-links">
      <a href="index.html">Accueil</a>
      <a href="review.html">Apprendre</a>
      <a href="progres.html">ProgrÃ¨s</a>
      <a href="login.html">Connexion</a>
    </div>
    <div class="nav-actions">
      <a href="login.html" class="btn btn-purple">Se connecter</a>
      <a href="signup.html" class="btn btn-yellow">S'inscrire</a>
    </div>
  </nav>

  <main>
    <section class="main-card" style="max-width:700px;">
      <h1>Apprends le kabyle simplement, Ã  ton rythme</h1>
      <p class="subtitle" style="font-size:1.18rem; margin-bottom:1.5em;">DÃ©couvre, rÃ©vise et maÃ®trise le vocabulaire
        kabyle grÃ¢ce Ã  la rÃ©vision intelligente.</p>
      <p style="color:var(--text-light); font-size:1.13rem; margin-bottom:2.2em;">
        <b>Dialect</b> t'accompagne pour apprendre le kabyle, que tu sois dÃ©butant ou que tu veuilles raviver tes
        connaissances. <br>
        Profite d'exercices interactifs, d'un suivi de tes progrÃ¨s, et d'une mÃ©thode efficace pour mÃ©moriser
        durablement.<br><br>
        <b>Commence dÃ¨s maintenant ton voyage linguistique&nbsp;!</b>
      </p>
      <div class="cta-row"
        style="margin-bottom:2.2em; display:flex; justify-content:center; gap:1.2em; flex-wrap:wrap;">
        <a href="review.html" class="btn btn-primary">Commencer</a>
        <a href="discovery.html" class="btn btn-outline">DÃ©couvrir la mÃ©thode</a>
      </div>
      <div class="features-row" style="display:flex; justify-content:center; gap:2em; flex-wrap:wrap;">
        <div class="feature"><span class="emoji">ğŸ“š</span><br>MÃ©thode<br>progressive</div>
        <div class="feature"><span class="emoji">ğŸ§ </span><br>Exercices<br>interactifs</div>
        <div class="feature"><span class="emoji">ğŸ”Š</span><br>Audio<br>natif</div>
        <div class="feature"><span class="emoji">ğŸ“ˆ</span><br>Suivi de tes<br>progrÃ¨s</div>
      </div>
    </section>
    <section class="main-card" style="max-width:1000px; width:100%;">
      <h2>Lexique thÃ©matique</h2>
      <div class="lexique-controls">
        <label for="theme-select">Filtrer par thÃ¨me :</label>
        <select id="theme-select">
          <option value="all">Tous les thÃ¨mes</option>
        </select>
      </div>
      <div id="lexique-content">Chargement du lexiqueâ€¦</div>
    </section>
  </main>

  <footer>
    Â© 2025 Dialect
  </footer>

  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="ui.js" type="module"></script>

  <!-- Script pour le menu mobile -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const menuBtn = document.querySelector('.mobile-menu-btn');
      const mobileMenu = document.querySelector('.mobile-menu');
      const mobileMenuBg = document.querySelector('.mobile-menu-bg');

      // Ouvrir le menu
      menuBtn.addEventListener('click', function () {
        mobileMenu.classList.add('open');
        mobileMenuBg.classList.add('open');
      });

      // Fermer le menu en cliquant sur le fond
      mobileMenuBg.addEventListener('click', function () {
        mobileMenu.classList.remove('open');
        mobileMenuBg.classList.remove('open');
      });

      // Fermer le menu en cliquant sur un lien
      const menuLinks = mobileMenu.querySelectorAll('a');
      menuLinks.forEach(link => {
        link.addEventListener('click', function () {
          mobileMenu.classList.remove('open');
          mobileMenuBg.classList.remove('open');
        });
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const path = window.location.pathname.split('/').pop();
      document.querySelectorAll('.mobile-tabbar a').forEach(link => {
        if (link.getAttribute('href') === path) {
          link.classList.add('active');
        }
      });
      document.querySelectorAll('.burger-menu a').forEach(link => {
        if (link.getAttribute('href') === path) {
          link.classList.add('active');
        }
      });
    });

    // GÃ©nÃ©ration dynamique du lexique Ã  partir de data/data3.csv
    const THEMES = [
      { nom: 'Verbes', mots: ['Ãªtre', 'venir', 'dire', 'voir', 'faire', 'manger', 'boire', 'prendre', 'aller', 'accompagner', 'jurer', 'tisser', 'rÃ©aliser', 'armer'] },
      { nom: 'Nature', mots: ['eau', 'arbre', 'ciel', 'soleil', 'lune', 'terre', 'vent', 'montagne', 'herbe', 'mer', 'foin', 'boue', 'baie', 'oasis'] },
      { nom: 'Corps humain', mots: ['main', 'tÃªte', 'jambe', 'nez', 'bouche', 'Å“il', 'oreille', 'pied', 'dent', 'dos', 'cou', 'peau', 'sein', 'sang'] },
      { nom: 'Animaux', mots: ['chat', 'bouc', 'hyÃ¨ne', 'Ã¢ne', 'chien', 'oiseau', 'poisson', 'vache', 'mouton', 'cheval'] },
      { nom: 'Nourriture', mots: ['pain', 'lait', 'fromage', 'viande', 'fruit', 'lÃ©gume', 'miel', 'biÃ¨re', 'melon', 'noix'] },
      { nom: 'Maison', mots: ['maison', 'porte', 'fenÃªtre', 'chambre', 'lit', 'cuisine', 'table', 'chaise', 'clÃ©'] },
      { nom: 'VÃªtements', mots: ['chemise', 'pantalon', 'robe', 'manteau', 'chapeau', 'chaussure', 'tablier'] },
      { nom: 'Couleurs', mots: ['bleu', 'blanc', 'noir', 'rouge', 'vert', 'jaune', 'gris'] },
      { nom: 'Famille', mots: ['pÃ¨re', 'mÃ¨re', 'frÃ¨re', 'soeur', 'fils', 'fille', 'oncle', 'tante', 'grand-mÃ¨re', 'grand-pÃ¨re'] },
      { nom: 'Objets du quotidien', mots: ['table', 'chaise', 'porte', 'fenÃªtre', 'lit', 'bol', 'cuir', 'bouteille', 'clÃ©'] }
    ];
    function detectTheme(fr) {
      for (const t of THEMES) {
        for (const mot of t.mots) {
          if (fr.toLowerCase().includes(mot)) return t.nom;
        }
      }
      return 'Autres';
    }
    function renderLexique(data) {
      const themes = {};
      data.forEach(row => {
        const fr = row['FranÃ§ais']?.trim();
        const kab = row['Kabyle']?.trim();
        if (!fr || !kab) return;
        const theme = detectTheme(fr);
        if (!themes[theme]) themes[theme] = [];
        // SÃ©parer les traductions multiples
        const traductions = kab.split('/').map(t => t.trim()).filter(t => t);
        themes[theme].push({ fr, kab });
      });
      // Remplir dynamiquement le menu dÃ©roulant avec les thÃ¨mes dÃ©tectÃ©s
      const themeSelect = document.getElementById('theme-select');
      themeSelect.innerHTML = '<option value="all">Tous les thÃ¨mes</option>';
      Object.keys(themes).forEach(theme => {
        const option = document.createElement('option');
        option.value = theme;
        option.textContent = theme;
        themeSelect.appendChild(option);
      });
      // Affichage filtrÃ©
      function displayLexique(selectedTheme = 'all') {
        let html = '';
        Object.keys(themes).forEach(theme => {
          if (selectedTheme === 'all' || theme === selectedTheme) {
            html += `<div class='lexique-theme'><h3>${theme}</h3><ul class='lexique-list'>`;
            themes[theme].forEach(({ fr, kab }) => {
              html += `<li><span class='fr'>${fr}</span> <span class='kab'>${kab}</span></li>`;
            });
            html += '</ul></div>';
          }
        });
        document.getElementById('lexique-content').innerHTML = html;
      }
      displayLexique();
      themeSelect.addEventListener('change', (e) => {
        displayLexique(e.target.value);
      });
    }
    Papa.parse('data/data3.csv?v=4', {
      download: true,
      header: true,
      skipEmptyLines: true,
      delimiter: ';',
      complete: ({ data }) => renderLexique(data)
    });
  </script>
</body>

</html>